<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tempo Musical - Ingreso de Usuarios</title>
    <link rel="stylesheet" href="styles3.css">
    <link rel="shortcut icon" href="../img/icono.png" type="image/x-icon">

    <script>
        function validarCorreo() {
            var correo = document.getElementById("correo").value;

            if (correo.includes("@") && (correo.endsWith("gmail.com") || correo.endsWith("hotmail.com"))) {
                calcularEdad();
                return true;
            } else {
                window.alert("Correo no válido. Debe contener '@' y tener una terminación de 'gmail.com' o 'hotmail.com'");
                return false;
            }
        }

        function calcularEdad() {
            var fechaNacimiento = document.getElementById("edad").value;
            var fechaActual = new Date();
            var fechaNac = new Date(fechaNacimiento);
            var edad = fechaActual.getFullYear() - fechaNac.getFullYear();

            if (fechaNac.getMonth() > fechaActual.getMonth() || (fechaNac.getMonth() === fechaActual.getMonth() && fechaNac.getDate() > fechaActual.getDate())) {
                edad--;
            }

            document.getElementById("mostrarEdad").innerText = edad + " años";
        }
    </script>
</head>
<body>
    <form action="ingresar_user.php" method="POST" onsubmit="return validarCorreo()">
        <h1>Ingresa un Usuario nuevo</h1>
        <div class="conteiner">
            <div class="minconteiner">
                <label for="id">Código:</label>
                <input type="text" name="codigo_trabajador" id="" required>
            </div>
            <div class="minconteiner">
                <label for="user">Usuario:</label>
                <input type="text" name="user" id="" required>
            </div>
        </div>
        <div class="conteiner">
            <div class="minconteiner">
                <label for="correo">Correo:</label>
                <input type="text" name="correo" id="correo" required>
            </div>
            <div class="minconteiner">
                <label for="contra">Contraseña:</label>
                <input type="password" id="password" name="contra" required>
            </div>
        </div>
        <div class="conteiner">
            <div class="minconteiner">
                <label for="edad">Fecha de nacimiento:</label>
                <br>
                <input type="date" id="edad" value="" min="1900-01-01" max="2023-12-31" name="edad" required>
            </div>
            <div class="minconteiner">
                <label for="">La edad que tienes es de:</label>
                <p id="mostrarEdad"></p>
                <button type="button" onclick="calcularEdad()" style="font-size: 10px;">Validar</button>
            </div>
        </div>
        <button type="submit" value="Registrar">Ingresar</button>
        <button style="margin-left: 2%;"><a href="../inicio.html">Regresar</a></button>
    </form>
</body>
</html>
